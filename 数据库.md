# 数据库语法
## 数据表和字段的基本操作
### 创建表
语法结构：ALTER TABLE命令
``` sql
ALTER TABLE 表名 ADD CONSTRAINT 约束名 约束内容
```
### 数据插入
语法结构：INSERT命令
```sql
INSERT INTO 表名(列名1,列名2,...) VALUES (值1,值2,...)
```
语法解析：
- 列名可以省略。当省略列名时，默认是表中所有的列名，列名顺序为表定义中列的先后顺序。
- 值的数量和顺序要与列名的数量和顺序一致。值的类型和列名的类型一致。
### 简单查询
语法结构：SELECT命令
```sql
SELECT *|列名|表达式 FROM 表名 WHERE 条件 ORDER BY 列名
```
语法解析：
- *表示表中的所有列。
- 列名可以选择若干个表中的列名，各个列表中间用逗号分隔。
- 表达式可以是列名、函数、常数等组成的表达式。
- WHERE子句是查询的条件。
- ORDER BY要求在查询的结果中排序，默认是升序。
### 更新数据
语法结构：UPDATE操作
```sql
UPDATE 表名 SET 列名1=值，列名2=值,... WHERE 条件
```
### 删除数据
语法结构：DELETE操作
```sql
DELETE FROM 表名 WHERE 条件
```
### 删除全部数据
语法结构：TRUNCATE（DDL命令）
```sql
TRUNCATE TABLE 表名
```
TRUNCATE和DELETE都能把表中的数据全部删除，他们的区别是：
- TRUNCATE的DDL命令，删除的数据不能恢复；DELETE命令是DML命令，删除后的数据可
以通过日志文件恢复。
- 如果一个表中数据记录很多，TRUNCATE相对DELETE速度更快。

由于TRUNCATE命令比较危险，因此在实际开发中，TRUNCATE命令慎用。
## 运算符
### 算术运算
|加|减|乘|除|取余|
|---|---|---|---|---|
|+|-|*|/|MOD(x,y)|
### 关系运算和逻辑运算
|等于|不等于|大于|小于|大于或者等于|小于或者等于|和|或|非|
|---|---|---|---|---|---|---|---|---|
|=|<>或!=|>|<|>=|<=|AND|OR|NOT|
### 字符串连接操作符（||）
## 高级查询
### 消除重复行
在 Oracle 查询中结果中，可能出现若干行相同的情况，那么可以使用 ```DISTINCT``` 消除重复行。
### NULL 操作
如果某条记录中有缺少的数据值，就是空值（NULL 值）。空值不等于 0 或者空格，空值是指未赋值、未知或不可用的值。任何数据类型的列都可以包括 NULL 值，除非该列被定义为非空或者主键。
### IN 操作
在 WHERE 子句中可以使用 ```IN``` 操作符来查询其列值在指定的列表中的行。比如：查询出工作职责是 SALESMAN、PRESIDENT 或者 ANALYST 的员工：
``` sql
WHERE JOB = 'SALESMAN ' OR JOB = 'PRESIDENT ' OR JOB = 'ANALYST '
或
WHERE JOB IN ('SALESMAN', 'PRESIDENT', 'ANALYST')
```
### BETWEEN...AND...
在 WHERE 子句中，可以使用 ```BETWEEN``` 操作符来查询列值包含在指定区间内的行。比如，查询工资从 1000 到 2000 之间的员工：
```sql
WHERE SAL>=1000 AND SAL<=2000
或
WHERE SAL BETWEEN 1000 AND 2000
```
BETWEEN 操作所指定的范围也包括边界。
### LIKE 模糊查询
在一些查询时，可能把握不准需要查询的确切值，比如百度搜索时输入关键字即可查询出相关的结果，这种查询称为模糊查询。模糊查询使用 LIKE 关键字，通过字符匹配检索出所需要的数据行。字符匹配操作可以使用通配符“%”和“_”:
- %：表示零个或者多个任意字符。
- _：代表一个任意字符。

语法结构：LIKE '字符串'[ESCAPE '字符']。匹配的字符串中，ESCAPE 后面的“字符”作为转义字符。
|通配符表达式|说明|
|---|---|
|'S%'|以 S 开头的字符串|
|'_S%'|第二个字符是 S 的字符串|
|'%30\\%%' escape '\\'| 包含“30%”的字符串，“\”指转义字符，“\%”在字符串中表示一个字符“%”|
### 集合运算
集合运算就是将两个或者多个结果集组合成为一个结果集。集合运算包括：
- INTERSECT（交集），返回两个查询共有的记录。
- UNION ALL（并集），返回各个查询的所有记录，包括重复记录。
- UNION（并集），返回各个查询的所有记录，不包括重复记录。
- MINUS（补集），返回第一个查询检索出的记录减去第二个查询检索出的记录之后剩余的记录。

当使用集合操作的时候，要注意：查询所返回的列数以及列的类型必须匹配，列名可以不同。
### 连接查询
通过连接运算符可以实现多个表查询。连接是关系数据库模型的主要特点，也是它区别于其它类型数据库管理系统的一个标志。

在关系数据库管理系统中，表建立时各数据之间的关系不必确定，常把一个实体的所有信息存放在一个表中。当检索数据时，通过连接操作查询出存放在多个表中的不同实体的信息。连接操作给用户带来很大的灵活性，他们可以在任何时候增加新的数据类型。为不同实体创建新的表，尔后通过连接进行查询。
连接可以在 Select 语句的 FROM 子句或 Where 子句中建立，似是而非在FROM 子句中指出连接时有助于将连接操作与 Where 子句中的搜索条件区分开来。
语法结构：
```sql
FROM join_table join_type join_table [ON (join_condition)]
```
语法解析：
- join_table 指出参与连接操作的表名，连接可以对同一个表操作，也可以
对多表操作，对同一个表操作的连接又称做自连接。
- join_type 指出连接类型，可分为三种：内连接、外连接和交叉连接。
    - 内连接
    内连接查询操作列出与连接条件匹配的数据行，它使用比较运算符比较被连接列的列值。内连接分三种：
        - 等值连接：在连接条件中使用等于号(=)运算符比较被连接列的列值，其查询结果中列出被连接表中的所有列，包括其中的重复列。
        - 不等连接：在连接条件使用除等于运算符以外的其它比较运算符比较被连接的列的列值。这些运算符包括>、>=、<=、<、!>、!<和<>。
        - 自然连接：在连接条件中使用等于(=)运算符比较被连接列的列值，但它使用选择列表指出查询结果集合中所包括的列，并删除连接表中的重复列。
    - 外连接
    内连接时，返回查询结果集合中的仅是符合查询条件( Where 搜索条件或HAVING 条件)和连接条件的行。而采用外连接时，它返回到查询结果集合中的不仅包含符合连接条件的行，而且还包括左表(左外连接时)、右表(右外连接时)或两个边接表(全外连接)中的所有数据行。
    - 交叉连接
    交叉连接不带 WHERE 子句，它返回被连接的两个表所有数据行的笛卡尔积，返回到结果集合中的数据行数等于第一个表中符合查询条件的数据行数乘以第二个表中符合查询条件的数据行数。
